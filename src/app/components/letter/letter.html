<div class="letter-container">
  <!-- ===================================== -->
  <!-- STEP 1: Title Screen (3 seconds)     -->
  <!-- ===================================== -->
  <div class="intro-screen title-screen" *ngIf="showTitleScreen">
    <div class="title-content">
      <h1 class="enchanted-title">A Special Letter Para sa Imo ðŸ’œ</h1>
      <div class="magical-glow-circle"></div>
    </div>
  </div>

  <!-- ===================================== -->
  <!-- STEP 2: Opening Screen (2 seconds)   -->
  <!-- ===================================== -->
  <div class="intro-screen loading-screen" *ngIf="showLoadingScreen">
    <div class="loading-content">
      <h2 class="loading-text">Opening the Letterâ€¦</h2>
      <div class="loading-dots">
        <span class="dot" [class.active]="loadingDot === 0">â€¢</span>
        <span class="dot" [class.active]="loadingDot === 1">â€¢</span>
        <span class="dot" [class.active]="loadingDot === 2">â€¢</span>
      </div>
      <div class="loading-glow-background"></div>
    </div>
  </div>

  <!-- ===================================== -->
  <!-- STEP 3: Main Card (Fades in)         -->
  <!-- ===================================== -->
  <div class="main-card-wrapper" *ngIf="showMainCard">
    <div class="letter-card" [class.open]="isCardOpen">
      <div class="card-front">
        <h2>A Special Letter Para sa ImoðŸ’œ</h2>
        <p class="tap-hint">Opening...</p>
      </div>

      <div class="card-inside">
        <div class="letter-content">
          <div class="opening-veil" [class.revealed]="isTypingActive">
            <span class="veil-glow"></span>
            <span class="veil-text">Opening...</span>
          </div>

          <div class="letter-body">
            <pre
              class="letter-text"
              [class.play]="isTypingActive"
            ><ng-container *ngFor="let piece of letterCharacters"><br *ngIf="piece.isBreak" class="letter-break" /><span *ngIf="!piece.isBreak" class="letter-char" [style.--i]="piece.index">{{ piece.char }}</span></ng-container></pre>
          </div>

          <button class="btn-enchanted continue-btn" (click)="scrollToNext()">
            Lantawa sad Ni PleaseðŸ’œ
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
